<!doctype html><html lang="en"><head><meta name="viewport" content="width=device-width,initial-scale=1"><title>Confirm GA Photo</title><style>html,body{height:100%;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5}@media screen and (max-width:600px){.box{width:80%}input[type=text]{width:100%;padding:5px;box-sizing:border-box}}.box{width:400px;margin:0 auto;padding:20px;border:1px solid #ccc;background-color:#f9f9f9;font-family:Arial,sans-serif}h2{text-align:center}form{margin-bottom:20px;text-align:center}label{display:block;margin-bottom:10px}input[type=text]{width:100%;padding:5px}button{padding:5px 10px;background-color:#4caf50;color:#fff;border:none;cursor:pointer}button.confirm-download{margin-top:10px;display:none;background-color:red}.result{text-align:center}.result img{max-width:300px}.modal{display:none;align-items:center;justify-content:center;position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:9999}.modal-content{position:relative;background-color:#fefefe;padding:20px;border-radius:5px;max-width:500px;text-align:center}.modal-close{position:absolute;top:10px;right:10px;color:#aaa;font-size:20px;font-weight:700;cursor:pointer}.loader{border:16px solid #f3f3f3;border-top:16px solid #4caf50;border-radius:50%;width:120px;height:120px;animation:spin 2s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.button-group{display:flex;justify-content:center;margin-top:10px}.button-group button{margin:5px}.button-group .confirm-download a{text-decoration:none;color:#fff}.button-group .confirm-download a:hover{text-decoration:underline}.error-message{color:red;margin-top:10px;text-align:center}.credit{font-size:50px;color:red;text-align:center}</style></head><body><div class="box"><h2>Confirm GA Photo</h2><form id="myForm"><label for="name">Name</label>
<input id="name" required>
<label for="idcard">IDcard</label>
<input id="idcard" required><br><button>Confirm</button>
<button type="reset">Exit</button></form><div class="result" id="result"></div><div class="modal" id="modal"><div class="modal-content"><div class="loader"></div><p id="modal-message"></p></div></div><div class="modal" id="error-modal"><div class="modal-content"><p id="error-message"></p><button id="confirm-btn">OK</button>
<button id="retry-btn">Retry</button></div></div><div class="button-group"><button class="confirm-download" id="confirm-download-btn">确认下载</button></div><div class="credit">By：<a href="https://t.me/hase886/">Hase</a></div><script>var form=document.getElementById("myForm"),resultDiv=document.getElementById("result"),modal=document.getElementById("modal"),modalMessage=document.getElementById("modal-message"),errorModal=document.getElementById("error-modal"),errorMessage=document.getElementById("error-message"),confirmBtn=document.getElementById("confirm-btn"),retryBtn=document.getElementById("retry-btn"),confirmDownloadBtn=document.getElementById("confirm-download-btn");form.addEventListener("submit",function(e){e.preventDefault(),sendRequest()}),confirmBtn.addEventListener("click",function(){hideErrorModal()}),retryBtn.addEventListener("click",function(){hideErrorModal(),sendRequest()}),confirmDownloadBtn.addEventListener("click",function(){downloadPhoto()});function sendRequest(){var n,e=document.getElementById("name").value,t=document.getElementById("idcard").value;showModal("Loading......"),resultDiv.innerHTML="",n=`${e}${t}.png`,fetch(`https://so.tiwwa.wtf/photo.php?name=${encodeURIComponent(e)}&idcard=${encodeURIComponent(t)}`,{redirect:"follow"}).then(e=>e.url).then(e=>{if(hideModal(),e==="-1"||e==="")showError("Failed！");else{var t,s=document.createElement("img");s.src=e,resultDiv.appendChild(s),t=document.createElement("a"),t.href=e,t.download=n,t.textContent="Download",confirmDownloadBtn.innerHTML="",confirmDownloadBtn.appendChild(t),confirmDownloadBtn.style.display="block"}}).catch(e=>{console.error("Error:",e),hideModal(),showError("Error！")})}function showModal(e){modalMessage.textContent=e,modal.style.display="flex"}function hideModal(){modal.style.display="none"}function showError(e){resultDiv.innerHTML="",errorMessage.textContent=e,errorModal.style.display="flex"}function hideErrorModal(){errorModal.style.display="none"}function downloadPhoto(){var t=document.getElementById("name").value,n=document.getElementById("idcard").value,s=resultDiv.querySelector("img").src,o=`${t}${n}.png`,e=document.createElement("a");e.href=s,e.download=o,e.click()}</script></div></body></html>
