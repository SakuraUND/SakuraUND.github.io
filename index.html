<!doctype html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><title>Confirm GA Photo</title><style>html,body{height:100%;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5}@media screen and (max-width:600px){.box{width:80%}input[type=text]{width:100%;padding:5px;box-sizing:border-box}}.box{width:400px;margin:0 auto;padding:20px;border:1px solid #ccc;background-color:#f9f9f9;font-family:Arial,sans-serif}h2{text-align:center}form{margin-bottom:20px;text-align:center}label{display:block;margin-bottom:10px}input[type=text]{width:100%;padding:5px}button{padding:5px 10px;background-color:#4caf50;color:#fff;border:none;cursor:pointer}.result{text-align:center}.result img{max-width:300px}.modal{display:none;align-items:center;justify-content:center;position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:9999}.modal-content{position:relative;background-color:#fefefe;padding:20px;border-radius:5px;max-width:500px;text-align:center}.modal-close{position:absolute;top:10px;right:10px;color:#aaa;font-size:20px;font-weight:700;cursor:pointer}.loader{border:16px solid #f3f3f3;border-top:16px solid #4caf50;border-radius:50%;width:120px;height:120px;animation:spin 2s linear infinite;margin:0 auto}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.copyright{font-size:50px;color:red;text-align:center}</style></head><body><div class="box"><h2>Confirm GA Photo</h2><form id="myForm"><label for="name">Name</label>
<input id="name" required>
<label for="idcard">IDcard</label>
<input id="idcard" required><br><button>Confirm</button>
<button type="reset">Exit</button></form><div class="result" id="result"></div><div class="modal" id="modal"><div class="modal-content"><div class="loader"></div><p id="modal-message"></p></div></div><div class="modal" id="error-modal"><div class="modal-content"><p id="error-message"></p><button id="confirm-btn">确认</button>
<button id="retry-btn">重试</button></div></div><div class="copyright">By @Hase</div></div><script>var form=document.getElementById("myForm"),resultDiv=document.getElementById("result"),modal=document.getElementById("modal"),modalMessage=document.getElementById("modal-message"),errorModal=document.getElementById("error-modal"),errorMessage=document.getElementById("error-message"),confirmBtn=document.getElementById("confirm-btn"),retryBtn=document.getElementById("retry-btn");form.addEventListener("submit",function(e){e.preventDefault(),sendRequest()}),confirmBtn.addEventListener("click",function(){hideErrorModal()}),retryBtn.addEventListener("click",function(){hideErrorModal(),sendRequest()});function sendRequest(){var e=document.getElementById("name").value,t=document.getElementById("idcard").value;showModal("Loading..."),resultDiv.innerHTML="",fetch(`http://154.12.17.227:7458/zjz.php?n=${e}&c=${t}`).then(e=>e.json()).then(e=>{if(hideModal(),e.code===-1||!e.photo)showError("Failed！");else{var t=document.createElement("img");t.src="data:image/jpeg;base64,"+e.photo,resultDiv.appendChild(t)}}).catch(e=>{console.error("Error:",e),hideModal(),showError("请求出错")})}function showModal(e){modalMessage.textContent=e,modal.style.display="flex"}function hideModal(){modal.style.display="none"}function showError(e){resultDiv.innerHTML="",errorMessage.textContent=e,errorModal.style.display="flex"}function hideErrorModal(){errorModal.style.display="none"}</script></div></body></html>